stages:
  - build
  - test

variables:
  CGO_ENABLED: 0

build:binary:
  image: golang:latest
  stage: build
  script:
    - go build -ldflags "-X main.Version=`git describe --tags` -X 'main.Buildtime=`date -u --rfc-3339=seconds`'" -o bin/rait cmd/rait/rait.go
  artifacts:
    paths:
      - bin/rait

include:
  - template: Dependency-Scanning.gitlab-ci.yml
  - template: License-Scanning.gitlab-ci.yml
  - template: SAST.gitlab-ci.yml
